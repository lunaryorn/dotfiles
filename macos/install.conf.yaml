# MacOS specific dotfiles.

# Note: Link targets are relative to the repo root, not to this directory
- defaults:
    link:
      force: true
      create: true
- shell:
    - description: Check whether FileVault is enabled
      command: "sh -c '[ $(fdesetup isactive) == true ]'"
- link:
    # Fish shell config files
    ~/.config/fish/config.fish: fish/config.fish
    ~/.config/fish/functions:
      path: fish/functions/*.fish
      glob: true
    ~/.config/fish/conf.d:
      path: fish/conf.d/*.fish
      glob: true
    # DevonTHINK feed stylesheet
    "~/Library/Application Support/DEVONthink Pro 2/StyleSheets/Vollkorn.css": macos/devonthink-feed.css
    # Misc
    ~/.gemrc: misc/gemrc
    ~/.config/latexmk/latexmkrc: misc/latexmkrc
    ~/.gnupg/gpg.conf: misc/gpg.conf
    ~/.ideavimrc: misc/ideavimrc
    ~/.tmux.conf: misc/tmux.conf
    # Platform-specific config
    ~/.config/git/config.platform: macos/git/config.platform
    ~/.gnupg/gpg-agent.conf: macos/gpg-agent.conf
    ~/.ssh/config: macos/ssh-config
- shell:
    - description: Set macos defaults
      command: macos/scripts/defaults.py
      stdout: true
      stderr: true
    - description: Set yarn prefix to ~/.local
      command: yarn config set prefix ~/.local
    - description: Install iterm2 utilities
      command: macos/scripts/iterm2_tools.py
      stdout: true
      stderr: true
